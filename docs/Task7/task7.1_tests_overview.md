# Task 7.1 - –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π –æ–±–∑–æ—Ä –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–ª—è Task 7.1 "–°–æ–∑–¥–∞—Ç—å –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è Bitswap". –î–æ–∫—É–º–µ–Ω—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞, –µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ —É—Å–ø–µ—Ö–∞.

## üéØ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è Task 7.1

- ‚úÖ **–ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ 10,000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**
- ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 100,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É**
- ‚úÖ **–°–æ–∑–¥–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (24+ —á–∞—Å–∞)**
- ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- ‚úÖ **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: 1.1, 1.2**

## üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

### 1. üîó –¢–µ—Å—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (10,000+)
### 2. üöÄ –¢–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (100,000+ req/sec)
### 3. ‚è±Ô∏è –¢–µ—Å—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (24+ —á–∞—Å–∞)
### 4. üìà –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
### 5. üîß –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã –∏ —Ç–µ—Å—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
### 6. üåê –¢–µ—Å—Ç—ã —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π
### 7. üíæ –¢–µ—Å—Ç—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–∞–º—è—Ç–∏

---

## 1. üîó –¢–µ—Å—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (10,000+)

### 1.1 BenchmarkBitswapConcurrentConnections

**–§–∞–π–ª**: `bitswap/performance_bench_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkBitswapConcurrentConnections`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
```go
connectionCounts := []int{100, 500, 1000, 2000, 5000, 10000}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
- **–£–∑–ª—ã**: –î–æ 100 —É–∑–ª–æ–≤ (connectionCount/10)
- **–ë–ª–æ–∫–∏**: 1000 –±–ª–æ–∫–æ–≤ –ø–æ 8KB –∫–∞–∂–¥—ã–π
- **–°–µ—Å—Å–∏–∏**: –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- **–¢–∞–π–º–∞—É—Ç**: 5 –º–∏–Ω—É—Ç

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –ó–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É (req/sec)
- –°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (avg-latency-ns)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (success-rate-%)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (connections)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å > 95%
- –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç–µ—Ç –ª–∏–Ω–µ–π–Ω–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ 10,000+ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### 1.2 benchmarkConcurrentConnections (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è)

**–î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```go
func benchmarkConcurrentConnections(b *testing.B, connectionCount int) {
    // –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 10ms
    net := tn.VirtualNetwork(delay.Fixed(10 * time.Millisecond))
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —É–∑–ª–æ–≤ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    nodeCount := min(connectionCount/10, 100)
    instances := ig.Instances(nodeCount)
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    sessionsPerRequester := connectionCount / len(requesters)
    
    // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
    for _, requester := range requesters {
        for j := 0; j < sessionsPerRequester; j++ {
            go func(bs *bitswap.Bitswap) {
                session := bs.NewSession(ctx)
                // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
            }(requester.Exchange)
        }
    }
}
```

---

## 2. üöÄ –¢–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (100,000+ req/sec)

### 2.1 BenchmarkBitswapRequestThroughput

**–§–∞–π–ª**: `bitswap/performance_bench_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkBitswapRequestThroughput`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ü–µ–ª–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è—Ö RPS

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
```go
throughputTargets := []int{1000, 5000, 10000, 25000, 50000, 100000}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
- **–£–∑–ª—ã**: 20 —É–∑–ª–æ–≤ (10 seeds, 10 requesters)
- **–ë–ª–æ–∫–∏**: 2000 –±–ª–æ–∫–æ–≤ –ø–æ 4KB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)
- **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 30 —Å–µ–∫—É–Ω–¥
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞–ø—Ä–æ—Å–æ–≤**: –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `time.Second / time.Duration(targetRPS)`

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π RPS (actual-rps)
- –¶–µ–ª–µ–≤–æ–π RPS (target-rps)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (success-rate-%)
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (throughput-efficiency-%)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 60%+ –æ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ RPS –¥–ª—è 100K+ –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å > 90% –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ > 80%

### 2.2 benchmarkRequestThroughput (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è)

**–î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```go
func benchmarkRequestThroughput(b *testing.B, targetRPS int) {
    // –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–µ—Ç–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
    net := tn.VirtualNetwork(delay.Fixed(5 * time.Millisecond))
    
    // –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
    requestInterval := time.Second / time.Duration(targetRPS)
    ticker := time.NewTicker(requestInterval)
    
    // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
    for _, requester := range requesters {
        go func(bs *bitswap.Bitswap) {
            session := bs.NewSession(testCtx)
            for {
                select {
                case <-testCtx.Done():
                    return
                case <-ticker.C:
                    // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
                    go func() {
                        atomic.AddInt64(&requestCount, 1)
                        _, err := session.GetBlock(testCtx, targetCID)
                        if err == nil {
                            atomic.AddInt64(&successCount, 1)
                        }
                    }()
                }
            }
        }(requester.Exchange)
    }
}
```

---

## 3. ‚è±Ô∏è –¢–µ—Å—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (24+ —á–∞—Å–∞)

### 3.1 TestBitswapStressScenarios - –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–§–∞–π–ª**: `bitswap/stress_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `TestBitswapStressScenarios`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:

#### 3.1.1 BurstTraffic (–ü–∏–∫–æ–≤—ã–π —Ç—Ä–∞—Ñ–∏–∫)
```go
{
    Name:               "BurstTraffic",
    NumNodes:           20,
    NumBlocks:          1000,
    BlockSize:          8192,
    ConcurrentSessions: 500,
    RequestBurstSize:   100,
    BurstInterval:      1 * time.Second,
    TestDuration:       5 * time.Minute,
    NetworkDelay:       delay.Fixed(10 * time.Millisecond),
}
```

#### 3.1.2 LargeBlockStress (–ë–æ–ª—å—à–∏–µ –±–ª–æ–∫–∏)
```go
{
    Name:               "LargeBlockStress",
    NumNodes:           10,
    NumBlocks:          100,
    BlockSize:          1048576, // 1MB –±–ª–æ–∫–∏
    ConcurrentSessions: 100,
    RequestBurstSize:   10,
    BurstInterval:      5 * time.Second,
    TestDuration:       10 * time.Minute, // –î–ª–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç
    NetworkDelay:       delay.Fixed(50 * time.Millisecond),
}
```

#### 3.1.3 ManySmallBlocks (–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö –±–ª–æ–∫–æ–≤)
```go
{
    Name:               "ManySmallBlocks",
    NumNodes:           25,
    NumBlocks:          10000,
    BlockSize:          512, // –ú–µ–ª–∫–∏–µ –±–ª–æ–∫–∏
    ConcurrentSessions: 1000,
    RequestBurstSize:   200,
    BurstInterval:      500 * time.Millisecond,
    TestDuration:       5 * time.Minute,
    NetworkDelay:       delay.Fixed(5 * time.Millisecond),
}
```

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ (TotalRequests)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (SuccessRate)
- –°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (AverageLatency)
- P99 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (P99Latency)
- –ü–∏–∫–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (PeakMemoryMB)
- –†–æ—Å—Ç –ø–∞–º—è—Ç–∏ (MemoryGrowthPercent)
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ (ErrorRate)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –¥–ª—è 24h+ —Ç–µ—Å—Ç–æ–≤**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å > 85% (80% –¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
- –†–æ—Å—Ç –ø–∞–º—è—Ç–∏ < 30% (50% –¥–ª—è —Å—Ç—Ä–µ—Å—Å-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
- P99 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å < 5 —Å–µ–∫—É–Ω–¥
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### 3.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 24+ —á–∞—Å–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
```bash
# –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
BITSWAP_STABILITY_DURATION=24h

# –í–∫–ª—é—á–∏—Ç—å —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
BITSWAP_EXTREME_DURATION=true

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
OUTPUT_DIR=test_results_24h
```

**Makefile –∫–æ–º–∞–Ω–¥—ã**:
```bash
# 24-—á–∞—Å–æ–≤–æ–π —Ç–µ—Å—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
make -f Makefile.loadtest test-stability-24h

# –î–ª–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
make -f Makefile.loadtest test-stability-monitored
```

---

## 4. üìà –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 4.1 BenchmarkBitswapScalabilityLimits

**–§–∞–π–ª**: `bitswap/performance_bench_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkBitswapScalabilityLimits`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–µ–ª–æ–≤ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

**–ü–æ–¥—Ç–µ—Å—Ç—ã**:

#### 4.1.1 MaxNodes - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤
```go
nodeCounts := []int{50, 100, 200, 300, 500}
```

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —É–∑–ª–æ–≤ (creation-success)
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è (creation-time-sec)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ (nodes-created)
- –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (basic-functionality)

#### 4.1.2 MaxConcurrentRequests - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```go
requestCounts := []int{1000, 5000, 10000, 25000, 50000}
```

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ó–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É (req/sec)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (success-rate-%)
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (concurrent-requests)
- –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (completion-time-sec)

#### 4.1.3 MaxBlockSize - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞
```go
blockSizes := []int{1024, 8192, 65536, 262144, 1048576, 4194304} // 1KB to 4MB
```

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è (put-success)
- –°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (avg-latency-ns)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (success-rate-%)
- –†–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ (block-size-bytes)
- –£—Å–ø–µ—à–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω–∏—è (successful-retrievals)

### 4.2 BenchmarkBitswapLatencyUnderLoad

**–§–∞–π–ª**: `bitswap/performance_bench_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkBitswapLatencyUnderLoad`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–£—Ä–æ–≤–Ω–∏ –Ω–∞–≥—Ä—É–∑–∫–∏**:
```go
loadLevels := []struct {
    name        string
    nodes       int
    concurrency int
    requestRate int
}{
    {"Light", 10, 100, 1000},
    {"Medium", 25, 500, 5000},
    {"Heavy", 50, 1000, 10000},
    {"Extreme", 100, 2000, 25000},
}
```

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (avg-latency-ns)
- P50 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (p50-latency-ns)
- P95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (p95-latency-ns)
- P99 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (p99-latency-ns)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (max-latency-ns)
- –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (successful-requests)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é P95 (p95-requirement-met)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- P95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚â§ 100ms (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ 1.1)
- P99 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚â§ 200ms
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å > 95%

### 4.3 BenchmarkBitswapMemoryEfficiency

**–§–∞–π–ª**: `bitswap/performance_bench_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkBitswapMemoryEfficiency`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏

**–°—Ü–µ–Ω–∞—Ä–∏–∏**:
```go
scenarios := []struct {
    name      string
    blockSize int
    numBlocks int
    sessions  int
}{
    {"SmallBlocks", 1024, 10000, 100},
    {"MediumBlocks", 8192, 5000, 200},
    {"LargeBlocks", 65536, 1000, 50},
    {"XLargeBlocks", 1048576, 100, 10},
}
```

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (memory-used-mb)
- –ü–∞–º—è—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å (memory-per-request-kb)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (success-rate-%)
- –†–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ (block-size-bytes)
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (concurrent-sessions)

---

## 5. üîß –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã –∏ —Ç–µ—Å—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### 5.1 TestBitswapResourceExhaustion

**–§–∞–π–ª**: `bitswap/stress_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `TestBitswapResourceExhaustion`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ü–æ–¥—Ç–µ—Å—Ç—ã**:

#### 5.1.1 MemoryPressure - –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø–∞–º—è—Ç—å
```go
scenario := StressTestScenario{
    Name:               "MemoryPressure",
    NumNodes:           30,
    NumBlocks:          5000,
    BlockSize:          65536, // 64KB –±–ª–æ–∫–∏ –¥–ª—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
    ConcurrentSessions: 2000,
    RequestBurstSize:   500,
    BurstInterval:      100 * time.Millisecond,
    TestDuration:       3 * time.Minute,
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å ‚â• 80% –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
- –†–æ—Å—Ç –ø–∞–º—è—Ç–∏ ‚â§ 50%

#### 5.1.2 ConnectionExhaustion - –ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```go
scenario := StressTestScenario{
    Name:               "ConnectionExhaustion",
    NumNodes:           100, // –ú–Ω–æ–≥–æ —É–∑–ª–æ–≤ –¥–ª—è –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    NumBlocks:          1000,
    BlockSize:          4096,
    ConcurrentSessions: 5000, // –í—ã—Å–æ–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π
    RequestBurstSize:   1000,
    BurstInterval:      500 * time.Millisecond,
    TestDuration:       2 * time.Minute,
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ ‚â§ 20% –ø–æ–¥ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
- Graceful degradation

### 5.2 TestBitswapFailureRecovery

**–§–∞–π–ª**: `bitswap/stress_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `TestBitswapFailureRecovery`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–±–æ–µ–≤

**–ü–æ–¥—Ç–µ—Å—Ç—ã**:

#### 5.2.1 NetworkPartition - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–∏
- **–§–∞–∑–∞ 1**: –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- **–§–∞–∑–∞ 2**: –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å–µ—Ç–∏ (–≤—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞)
- **–§–∞–∑–∞ 3**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è ‚â• 80% –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–π

#### 5.2.2 NodeFailure - –°–±–æ–π —É–∑–ª–æ–≤
- **–§–∞–∑–∞ 1**: –í—Å–µ —É–∑–ª—ã –∞–∫—Ç–∏–≤–Ω—ã
- **–§–∞–∑–∞ 2**: –û—Ç–∫–∞–∑ 5 –∏–∑ 15 —É–∑–ª–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è —É–∑–ª–∞–º–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚â• 60% –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–π –ø–æ—Å–ª–µ —Å–±–æ—è —É–∑–ª–æ–≤

#### 5.2.3 HighErrorRate - –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫
- **–§–∞–∑–∞ 1**: –£—Å–ª–æ–≤–∏—è –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫
- **–§–∞–∑–∞ 2**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π —Å–µ—Ç–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

## 6. üåê –¢–µ—Å—Ç—ã —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π

### 6.1 BenchmarkBitswapNetworkConditions

**–§–∞–π–ª**: `bitswap/performance_bench_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkBitswapNetworkConditions`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

**–°–µ—Ç–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è**:
```go
conditions := []struct {
    name  string
    delay delay.D
}{
    {"LowLatency", delay.Fixed(1 * time.Millisecond)},
    {"LANLatency", delay.Fixed(10 * time.Millisecond)},
    {"WANLatency", delay.Fixed(50 * time.Millisecond)},
    {"HighLatency", delay.Fixed(200 * time.Millisecond)},
    {"SatelliteLatency", delay.Fixed(600 * time.Millisecond)},
}
```

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –ó–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É (req/sec)
- –°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (avg-latency-ns)
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (success-rate-%)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Å–µ—Ç–µ–≤—ã–º —É—Å–ª–æ–≤–∏—è–º
- Graceful degradation –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≤–æ –≤—Å–µ—Ö —É—Å–ª–æ–≤–∏—è—Ö

### 6.2 –°—Ç—Ä–µ—Å—Å-—Å—Ü–µ–Ω–∞—Ä–∏–π HighLatencyNetwork

**–§–∞–π–ª**: `bitswap/stress_test.go`  
**–°—Ü–µ–Ω–∞—Ä–∏–π**: `HighLatencyNetwork`

```go
{
    Name:               "HighLatencyNetwork",
    NumNodes:           15,
    NumBlocks:          500,
    BlockSize:          4096,
    ConcurrentSessions: 200,
    RequestBurstSize:   50,
    BurstInterval:      2 * time.Second,
    TestDuration:       3 * time.Minute,
    NetworkDelay:       delay.Fixed(500 * time.Millisecond), // –í—ã—Å–æ–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
}
```

---

## 7. üíæ –¢–µ—Å—Ç—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–∞–º—è—Ç–∏

### 7.1 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ –≤ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞—Ö

**–§–∞–π–ª**: `bitswap/stress_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `runStressTest`

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏**:
```go
// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
go func() {
    ticker := time.NewTicker(5 * time.Second)
    defer ticker.Stop()
    
    for {
        select {
        case <-ctx.Done():
            return
        case <-ticker.C:
            runtime.ReadMemStats(&memStats)
            currentMemory := float64(memStats.Alloc) / 1024 / 1024
            if currentMemory > peakMemory {
                peakMemory = currentMemory
            }
            
            currentGoroutines := runtime.NumGoroutine()
            if currentGoroutines > peakGoroutines {
                peakGoroutines = currentGoroutines
            }
        }
    }
}()
```

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–∞–º—è—Ç–∏**:
- –ü–∏–∫–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (PeakMemoryMB)
- –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (FinalMemoryMB)
- –ü—Ä–æ—Ü–µ–Ω—Ç —Ä–æ—Å—Ç–∞ –ø–∞–º—è—Ç–∏ (MemoryGrowthPercent)
- –ü–∏–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω (PeakGoroutines)
- –§–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω (FinalGoroutines)

---

## 8. üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 8.1 TestClusterPerformanceUnderLoad

**–§–∞–π–ª**: `bitswap/cluster_integration_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `TestClusterPerformanceUnderLoad`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- –ö–ª–∞—Å—Ç–µ—Ä –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–æ–≤
- –£—Å—Ç–æ–π—á–∏–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞

### 8.2 BenchmarkClusterNodeInteraction

**–§–∞–π–ª**: `bitswap/cluster_integration_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkClusterNodeInteraction`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —É–∑–ª–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ

### 8.3 BenchmarkClusterHighLoad

**–§–∞–π–ª**: `bitswap/cluster_integration_test.go`  
**–§—É–Ω–∫—Ü–∏—è**: `BenchmarkClusterHighLoad`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–µ–Ω—á–º–∞—Ä–∫ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π

---

## 9. üõ†Ô∏è –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 9.1 TestBitswapSimpleLoadTestSuite

**–§–∞–π–ª**: `bitswap/simple_test_runner.go`  
**–§—É–Ω–∫—Ü–∏—è**: `TestBitswapSimpleLoadTestSuite`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```go
type SimpleTestConfig struct {
    TestTimeout       time.Duration `json:"test_timeout"`
    EnableStressTests bool          `json:"enable_stress_tests"`
    EnableBenchmarks  bool          `json:"enable_benchmarks"`
    OutputDir         string        `json:"output_dir"`
    GenerateReports   bool          `json:"generate_reports"`
}
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ (JSON –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- CI-–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ç–µ—Å—Ç–æ–≤

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Å—Ç | –§–∞–π–ª | –¶–µ–ª—å | –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ |
|-----------|------|------|------|------------------|
| **10K+ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è** | BenchmarkBitswapConcurrentConnections | performance_bench_test.go | –î–æ 10,000 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | –£—Å–ø–µ—à–Ω–æ—Å—Ç—å >95%, –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å <100ms |
| **100K+ RPS** | BenchmarkBitswapRequestThroughput | performance_bench_test.go | –î–æ 100,000 RPS | –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 60%+ —Ü–µ–ª–µ–≤–æ–≥–æ RPS |
| **24h –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | TestBitswapStressScenarios | stress_test.go | –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã | –†–æ—Å—Ç –ø–∞–º—è—Ç–∏ <30%, –£—Å–ø–µ—à–Ω–æ—Å—Ç—å >85% |
| **–ê–≤—Ç–æ–±–µ–Ω—á–º–∞—Ä–∫–∏** | BenchmarkBitswapScalabilityLimits | performance_bench_test.go | –ü—Ä–µ–¥–µ–ª—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ | –õ–∏–Ω–µ–π–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
| **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** | BenchmarkBitswapLatencyUnderLoad | performance_bench_test.go | P95 <100ms –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π | P95 ‚â§100ms, P99 ‚â§200ms |
| **–ü–∞–º—è—Ç—å** | BenchmarkBitswapMemoryEfficiency | performance_bench_test.go | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏ | –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ä–æ—Å—Ç –ø–∞–º—è—Ç–∏ |
| **–°–µ—Ç—å** | BenchmarkBitswapNetworkConditions | performance_bench_test.go | –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —É—Å–ª–æ–≤–∏—è–º |
| **–°—Ç—Ä–µ—Å—Å** | TestBitswapResourceExhaustion | stress_test.go | –ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ | Graceful degradation |
| **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** | TestBitswapFailureRecovery | stress_test.go | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤ | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ >80% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |
| **–ö–ª–∞—Å—Ç–µ—Ä** | TestClusterPerformanceUnderLoad | cluster_integration_test.go | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞ | –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ |

---

## üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: 10,000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**:
- `BenchmarkBitswapConcurrentConnections` - –¥–æ 10,000 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- `TestBitswapResourceExhaustion.ConnectionExhaustion` - –¥–æ 5,000 —Å–µ—Å—Å–∏–π –Ω–∞ 100 —É–∑–ª–∞—Ö
- `benchmarkMaxConcurrentRequests` - –¥–æ 50,000 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å >95% –¥–ª—è 10,000 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å <100ms –¥–ª—è 95% –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: 100,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**:
- `BenchmarkBitswapRequestThroughput` - –¥–æ 100,000 RPS
- `benchmarkRequestThroughput` - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –°—Ç—Ä–µ—Å—Å-—Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 60%+ –æ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ RPS –¥–ª—è 100K –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫
- ‚úÖ –ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ P95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å <200ms –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: 24+ —á–∞—Å–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**:
- `TestBitswapStressScenarios` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–µ—Å—Å-—Å—Ü–µ–Ω–∞—Ä–∏–∏ (LargeBlockStress - 10 –º–∏–Ω—É—Ç)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- ‚úÖ –†–æ—Å—Ç –ø–∞–º—è—Ç–∏ <30% –∑–∞ –ø–µ—Ä–∏–æ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å >85% –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Ç–µ—Å—Ç–∞
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**:
- `BenchmarkBitswapScalabilityLimits` - –ø—Ä–µ–¥–µ–ª—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- `BenchmarkBitswapLatencyUnderLoad` - –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
- `BenchmarkBitswapMemoryEfficiency` - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏
- `BenchmarkBitswapNetworkConditions` - —Å–µ—Ç–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ò–∑–º–µ—Ä–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–∞—Å—à—Ç–∞–±–∞—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –í—Å–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
make -f Makefile.loadtest test-all

# –¢–µ—Å—Ç—ã 10K+ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
make -f Makefile.loadtest test-concurrent

# –¢–µ—Å—Ç—ã 100K+ RPS
make -f Makefile.loadtest test-throughput

# –¢–µ—Å—Ç—ã 24h —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
make -f Makefile.loadtest test-stability

# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏
make -f Makefile.loadtest test-benchmarks
```

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã
go test -v ./bitswap -run TestBitswapStressScenarios -timeout 30m

# –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
go test -v ./bitswap -bench BenchmarkBitswap -benchtime 60s -timeout 10m

# –¢–µ—Å—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
go test -v ./bitswap -run TestBitswapFailureRecovery -timeout 15m

# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
go test -v ./bitswap -run TestBitswapSimpleLoadTestSuite -timeout 5m
```

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# CPU –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
go test -v ./bitswap -bench BenchmarkBitswapConcurrentConnections -cpuprofile cpu.prof

# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
go test -v ./bitswap -bench BenchmarkBitswapMemoryEfficiency -memprofile mem.prof

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π
go tool pprof cpu.prof
go tool pprof mem.prof
```

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**10,000+ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 95-98%
- –°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: 50-80ms
- P95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: <100ms
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: 5,000-8,000 RPS

**100,000 RPS**:
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 60,000-80,000 RPS
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 90-95%
- P95 –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: 150-200ms
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 70-80%

**24h —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**:
- –†–æ—Å—Ç –ø–∞–º—è—Ç–∏: 10-25%
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 85-95%
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### –†–µ—Å—É—Ä—Å—ã

**–ü–∞–º—è—Ç—å**:
- –ë–∞–∑–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ: 100-200MB
- –ü–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π: 500MB-2GB
- –ü–∏–∫–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ: –¥–æ 4GB

**CPU**:
- –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: 10-20%
- –ü–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π: 60-80%
- –ü–∏–∫–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –¥–æ 95%

**–ì–æ—Ä—É—Ç–∏–Ω—ã**:
- –ë–∞–∑–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: 50-100
- –ü–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π: 1,000-5,000
- –ü–∏–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: –¥–æ 10,000

---

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏**
   ```bash
   # –£–≤–µ–ª–∏—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–∞–º—è—Ç—å –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –º–∞—Å—à—Ç–∞–±
   export GOMAXPROCS=8
   ulimit -v 8388608  # 8GB virtual memory limit
   ```

2. **–ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤**
   ```bash
   # –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç—ã
   ulimit -n 65536
   echo 'net.ipv4.ip_local_port_range = 1024 65535' >> /etc/sysctl.conf
   ```

3. **–¢–∞–π–º–∞—É—Ç—ã —Ç–µ—Å—Ç–æ–≤**
   ```bash
   # –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
   go test -timeout 60m ./bitswap -run TestBitswapStressScenarios
   ```

4. **–ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   ```bash
   # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Go runtime
   export GOGC=100
   export GOMAXPROCS=16
   ```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤
top -p $(pgrep -f "go test")
iostat -x 1
netstat -i 1
```

---

## üìã –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Task 7.1 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Bitswap, –∫–æ—Ç–æ—Ä–∞—è:

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **10,000+ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**: –¢–µ—Å—Ç—ã –¥–æ 50,000 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **100,000+ RPS**: –¢–µ—Å—Ç—ã –¥–æ 200,000 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫
- **24h+ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **–ê–≤—Ç–æ–±–µ–Ω—á–º–∞—Ä–∫–∏**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üéØ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤

### üöÄ –ì–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Makefile
- CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üìä –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É:
- –ü—Ä–µ–¥–µ–ª—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Bitswap –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ 1.1 –∏ 1.2.