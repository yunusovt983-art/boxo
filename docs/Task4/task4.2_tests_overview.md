# Task 4.2 - –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä —Ç–µ—Å—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–ª—è Task 4.2 "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π". –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞, –≤–∫–ª—é—á–∞—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Task 4.2:**

1. **`connection_quality_monitor_test.go`** - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (600+ —Å—Ç—Ä–æ–∫)
2. **`adaptive_conn_manager_test.go`** - –¢–µ—Å—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –≤ —Å–æ—Å—Ç–∞–≤–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (—á–∞—Å—Ç–∏—á–Ω–æ)
3. **`example_adaptive_conn_manager_test.go`** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—á–∞—Å—Ç–∏—á–Ω–æ)

**–í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ:** Task 4.2 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å Task 4.1, –ø–æ—ç—Ç–æ–º—É —Ç–µ—Å—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ñ–∞–π–ª–∞–º, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ `connection_quality_monitor_test.go`.

---

## üß™ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ—Å—Ç–æ–≤

## 1. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (`connection_quality_monitor_test.go`)

### üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª–∞:**
- **–†–∞–∑–º–µ—Ä:** 600+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** 12 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ + 1 –±–µ–Ω—á–º–∞—Ä–∫
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** –í—Å–µ –∞—Å–ø–µ–∫—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ libp2p —Ö–æ—Å—Ç–∞–º–∏

### üîç **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤:**

#### **A. –¢–µ—Å—Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (4 —Ç–µ—Å—Ç–∞)**
#### **B. –¢–µ—Å—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (3 —Ç–µ—Å—Ç–∞)**  
#### **C. –¢–µ—Å—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (3 —Ç–µ—Å—Ç–∞)**
#### **D. –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π (2 —Ç–µ—Å—Ç–∞)**
#### **E. –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1 —Ç–µ—Å—Ç)**

---

## 2. **–ö–∞—Ç–µ–≥–æ—Ä–∏—è A: –¢–µ—Å—Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**

### üîç **A1. `TestConnectionQualityTracking`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
**–†–∞–∑–º–µ—Ä:** ~50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –º–µ—Ç—Ä–∏–∫ (–ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å)
- –ü–æ–¥—Å—á–µ—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –†–∞—Å—á–µ—Ç —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–∫–æ–ª—å–∑—è—â–∏—Ö —Å—Ä–µ–¥–Ω–∏—Ö

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
acm.connections[peerID] = &ConnectionInfo{
    PeerID:      peerID,
    ConnectedAt: time.Now(),
    Quality:     &ConnectionQuality{},
    State:       StateConnected,
}

// –ü–µ—Ä–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ (–±–µ–∑ –æ—à–∏–±–∫–∏)
latency := 50 * time.Millisecond
bandwidth := int64(1024 * 1024) // 1MB/s
acm.UpdateConnectionQuality(peerID, latency, bandwidth, false)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
quality := acm.GetConnectionQuality(peerID)
assert.Equal(t, latency, quality.Latency)
assert.Equal(t, bandwidth, quality.Bandwidth)
assert.Equal(t, int64(1), quality.TotalRequests)
assert.Equal(t, 0.0, quality.ErrorRate)

// –í—Ç–æ—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Å –æ—à–∏–±–∫–æ–π)
acm.UpdateConnectionQuality(peerID, 100*time.Millisecond, bandwidth/2, true)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
assert.Equal(t, int64(2), quality.TotalRequests)
assert.Equal(t, 0.5, quality.ErrorRate) // 50% –æ—à–∏–±–æ–∫
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –º–µ—Ç—Ä–∏–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥—Å—á–µ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—à–∏–±–æ–∫
- ‚úÖ –†–∞—Å—á–µ—Ç —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫ (ErrorRate)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫–æ–ª—å–∑—è—â–∏—Ö —Å—Ä–µ–¥–Ω–∏—Ö
### üéØ *
*A2. `TestConnectionQualityScoring`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
**–†–∞–∑–º–µ—Ä:** ~30 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (QualityScore)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (>0.8)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∏–∑–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (<0.5)
- –í–∑–≤–µ—à–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ —Ç—Ä–µ–º —Ñ–∞–∫—Ç–æ—Ä–∞–º

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –¢–µ—Å—Ç –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞: 10ms –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, 10MB/s –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –±–µ–∑ –æ—à–∏–±–æ–∫
acm.UpdateConnectionQuality(peerID, 10*time.Millisecond, 10*1024*1024, false)
quality := acm.GetConnectionQuality(peerID)
assert.Greater(t, quality.QualityScore, 0.8) // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

// –¢–µ—Å—Ç –Ω–∏–∑–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞: 500ms –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, 100KB/s, —Å –æ—à–∏–±–∫–æ–π
acm.UpdateConnectionQuality(peerID, 500*time.Millisecond, 100*1024, true)
quality = acm.GetConnectionQuality(peerID)
assert.Less(t, quality.QualityScore, 0.5) // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
```

#### **–ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:**
```go
// –§–æ—Ä–º—É–ª–∞: QualityScore = latencyScore*0.4 + bandwidthScore*0.3 + errorScore*0.3
// –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (40%): 0-200ms –¥–∏–∞–ø–∞–∑–æ–Ω
// –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (30%): –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫ 10MB/s  
// –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ (30%): 10% –æ—à–∏–±–æ–∫ = 0 –±–∞–ª–ª–æ–≤
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–µ—Å–æ–≤—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ (40%/30%/30%)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞

### üìù **A3. `TestRequestRecording`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
**–†–∞–∑–º–µ—Ä:** ~40 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ó–∞–ø–∏—Å—å –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ü–æ–¥—Å—á–µ—Ç –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
responseTime := 30 * time.Millisecond
acm.RecordRequest(peerID, responseTime, true)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
connInfo := acm.connections[peerID]
assert.WithinDuration(t, time.Now(), connInfo.LastActivity, time.Second)
assert.Equal(t, 0, connInfo.ErrorCount)

// –ó–∞–ø–∏—Å—å –Ω–µ—É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
acm.RecordRequest(peerID, 200*time.Millisecond, false)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ –æ—à–∏–±–æ–∫
assert.Greater(t, connInfo.ErrorCount, 0)
assert.WithinDuration(t, time.Now(), connInfo.LastError, time.Second)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Å—á–µ—Ç–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –∫–∞–∫ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### üö® **A4. `TestUnresponsiveMarking`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–æ—Ç–≤–µ—á–∞—é—â–∏—Ö –ø–∏—Ä–æ–≤
**–†–∞–∑–º–µ—Ä:** ~35 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –ø–∏—Ä–æ–≤ –∫–∞–∫ –Ω–µ–æ—Ç–≤–µ—á–∞—é—â–∏—Ö
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞—é—â–∏—Ö –ø–∏—Ä–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—à–∏–±–æ–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
state := acm.GetConnectionState(peerID)
assert.Equal(t, StateConnected, state)

// –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –∫–∞–∫ –Ω–µ–æ—Ç–≤–µ—á–∞—é—â–∏–π
acm.MarkUnresponsive(peerID)
state = acm.GetConnectionState(peerID)
assert.Equal(t, StateUnresponsive, state)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—à–∏–±–∫–∏
connInfo := acm.connections[peerID]
assert.WithinDuration(t, time.Now(), connInfo.LastError, time.Second)

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∫ –æ—Ç–≤–µ—á–∞—é—â–∏–π
acm.MarkResponsive(peerID)
state = acm.GetConnectionState(peerID)
assert.Equal(t, StateConnected, state)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –ó–∞–ø–∏—Å—å –≤—Ä–µ–º–µ–Ω–∏ –æ—à–∏–±–æ–∫
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## 3. **–ö–∞—Ç–µ–≥–æ—Ä–∏—è B: –¢–µ—Å—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤**

### üõ£Ô∏è **B1. `TestAlternativeRouteDiscovery`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∏—Å–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –ø–ª–æ—Ö–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
**–†–∞–∑–º–µ—Ä:** ~60 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ª—É—á—à–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ libp2p —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏

#### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ—Ö libp2p —Ö–æ—Å—Ç–æ–≤
h1 := createTestHost(t)
h2 := createTestHost(t)
h3 := createTestHost(t)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π h1‚Üîh2 –∏ h1‚Üîh3
h1.Connect(ctx, peer.AddrInfo{ID: h2.ID(), Addrs: h2.Addrs()})
h1.Connect(ctx, peer.AddrInfo{ID: h3.ID(), Addrs: h3.Addrs()})

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
acm.UpdateConnectionQuality(h2.ID(), 200*time.Millisecond, 100*1024, true)   // –ü–ª–æ—Ö–æ–µ
acm.UpdateConnectionQuality(h3.ID(), 20*time.Millisecond, 5*1024*1024, false) // –•–æ—Ä–æ—à–µ–µ

// –ü–æ–∏—Å–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –¥–ª—è h2
acm.findAlternativeRoutes(h2.ID())

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
quality := acm.GetConnectionQuality(h2.ID())
assert.Contains(t, quality.AlternativeRoutes, h3.ID())
assert.Equal(t, h3.ID(), quality.PreferredRoute)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ü–æ–∏—Å–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ª—É—á—à–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –í—ã–±–æ—Ä –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç–µ–≤—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏

### üéØ **B2. `TestRouteOptimization`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
**–†–∞–∑–º–µ—Ä:** ~50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–æ –∫–∞—á–µ—Å—Ç–≤—É
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ —Ö–æ—Ä–æ—à–∏—Ö/–ø–ª–æ—Ö–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —É–ª—É—á—à–µ–Ω–∏–π

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å —Ä–∞–∑–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º
acm.UpdateConnectionQuality(h2.ID(), 200*time.Millisecond, 100*1024, true)   // –ü–ª–æ—Ö–æ–µ
acm.UpdateConnectionQuality(h3.ID(), 20*time.Millisecond, 5*1024*1024, false) // –•–æ—Ä–æ—à–µ–µ

// –ó–∞–ø—É—Å–∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
err := acm.OptimizeRoutes(ctx)
require.NoError(t, err)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
poorPeers := acm.GetPoorQualityConnections(0.5)
assert.Contains(t, poorPeers, h2.ID())

goodPeers := acm.GetHighQualityConnections(0.5)
assert.Contains(t, goodPeers, h3.ID())
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤

### üîÑ **B3. `TestRouteSwitching`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
**–†–∞–∑–º–µ—Ä:** ~45 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –£—Å–ø–µ—à–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∏—Ä–æ–≤
- –ü–æ–¥—Å—á–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–æ–º
acm.connections[peerID1] = &ConnectionInfo{
    Quality: &ConnectionQuality{
        PreferredRoute: peerID2,
    },
    State: StateConnected,
}

// –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
newRoute, err := acm.SwitchToAlternativeRoute(peerID1)
require.NoError(t, err)
assert.Equal(t, peerID2, newRoute)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
quality := acm.GetConnectionQuality(peerID1)
assert.Equal(t, int64(1), quality.RouteChanges)

// –¢–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
acm.connections[peerID1].Quality.PreferredRoute = ""
_, err = acm.SwitchToAlternativeRoute(peerID1)
assert.Equal(t, ErrNoAlternativeRoute, err)

// –¢–µ—Å—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–∏—Ä–∞
_, err = acm.SwitchToAlternativeRoute(nonExistentPeer)
assert.Equal(t, ErrPeerNotFound, err)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫

---

## 4. **–ö–∞—Ç–µ–≥–æ—Ä–∏—è C: –¢–µ—Å—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

### üì° **C1. `TestLatencyMeasurement`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
**–†–∞–∑–º–µ—Ä:** ~40 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ libp2p ping —Å–µ—Ä–≤–∏—Å
- Fallback –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ping
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
- –¢–∞–π–º–∞—É—Ç—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö libp2p —Ö–æ—Å—Ç–æ–≤
h1 := createTestHost(t)
h2 := createTestHost(t)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
h1.Connect(ctx, peer.AddrInfo{ID: h2.ID(), Addrs: h2.Addrs()})

// –¢–µ—Å—Ç –∏–∑–º–µ—Ä–µ–Ω–∏—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
latency, err := acm.MeasureConnectionLatency(ctx, h2.ID())
if err != nil {
    // –ï—Å–ª–∏ ping –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å fallback
    assert.NotEqual(t, ErrPeerNotConnected, err)
} else {
    assert.Greater(t, latency, time.Duration(0))
    assert.Less(t, latency, 5*time.Second) // –†–∞–∑—É–º–Ω–æ–µ –≤—Ä–µ–º—è
}

// –¢–µ—Å—Ç –Ω–µ—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞
_, err = acm.MeasureConnectionLatency(ctx, nonConnectedPeer)
assert.Error(t, err)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ libp2p ping —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ping
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ (5 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### üìä **C2. `TestBandwidthEstimation`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
**–†–∞–∑–º–µ—Ä:** ~30 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –í–æ–∑–≤—Ä–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –¢–µ—Å—Ç –æ—Ü–µ–Ω–∫–∏ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–∏—Ä–∞
bandwidth := acm.EstimateBandwidth(peerID)
assert.Equal(t, int64(0), bandwidth)

// –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –∫–∞—á–µ—Å—Ç–≤–µ
acm.connections[peerID] = &ConnectionInfo{
    Quality: &ConnectionQuality{
        AvgBandwidth: 5 * 1024 * 1024, // 5MB/s
    },
    State: StateConnected,
}

// –¢–µ—Å—Ç –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
bandwidth = acm.EstimateBandwidth(peerID)
assert.Equal(t, int64(5*1024*1024), bandwidth)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥–Ω–µ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è (–±–∞–π—Ç—ã/—Å–µ–∫)

### üîó **C3. `TestQualityMonitoringIntegration`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
**–†–∞–∑–º–µ—Ä:** ~50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö libp2p —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –∫–∞—á–µ—Å—Ç–≤–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –±—ã—Å—Ç—Ä–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
config := &AdaptiveConnConfig{
    AdaptationInterval: 100 * time.Millisecond,
}
acm := NewAdaptiveConnManager(h1, config)

// –ó–∞–ø—É—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
err := acm.Start(ctx)
require.NoError(t, err)
defer acm.Stop()

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
h1.Connect(ctx, peer.AddrInfo{ID: h2.ID(), Addrs: h2.Addrs()})

// –û–∂–∏–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
time.Sleep(200 * time.Millisecond)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
state := acm.GetConnectionState(h2.ID())
assert.Equal(t, StateConnected, state)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –∫–∞—á–µ—Å—Ç–≤–∞
quality := acm.GetConnectionQuality(h2.ID())
assert.NotNil(t, quality)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã

---

## 5. **–ö–∞—Ç–µ–≥–æ—Ä–∏—è D: –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π**

### üîç **D1. `TestConnectionStateForNonExistentPeer`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∏—Ä–æ–≤
**–†–∞–∑–º–µ—Ä:** ~15 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
nonExistentPeer, _ := peer.Decode("12D3KooWNonExistent1234567890123456789012345678901234")

// –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–∏—Ä–∞
state := acm.GetConnectionState(nonExistentPeer)
assert.Equal(t, StateDisconnected, state)

// –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–∏—Ä–∞
quality := acm.GetConnectionQuality(nonExistentPeer)
assert.Nil(t, quality)
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∏—Ä–æ–≤
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–Ω–∏–∫–∏ –∏–ª–∏ –æ—à–∏–±–æ–∫

---

## 6. **–ö–∞—Ç–µ–≥–æ—Ä–∏—è E: –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

### üöÄ **E1. `BenchmarkFindAlternativeRoutes`**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
**–†–∞–∑–º–µ—Ä:** ~40 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### **–ü–æ–∫—Ä—ã–≤–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ —Å—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–µ—Ç–µ–π

#### **–ë–µ–Ω—á–º–∞—Ä–∫ —Å—Ü–µ–Ω–∞—Ä–∏–π:**
```go
// –°–æ–∑–¥–∞–Ω–∏–µ 100 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å —Ä–∞–∑–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º
for i := 0; i < 100; i++ {
    peerID := generateTestPeerID()
    acm.connections[peerID] = &ConnectionInfo{
        Quality: &ConnectionQuality{
            QualityScore: float64(i) / 100.0, // –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç 0.0 –¥–æ 1.0
        },
        State: StateConnected,
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ –ø–∏—Ä–∞ —Å –ø–ª–æ—Ö–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º
targetPeer := generateTestPeerID()
acm.connections[targetPeer] = &ConnectionInfo{
    Quality: &ConnectionQuality{
        QualityScore: 0.1, // –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
    },
    State: StateConnected,
}

b.ResetTimer()

// –ë–µ–Ω—á–º–∞—Ä–∫ –ø–æ–∏—Å–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
for i := 0; i < b.N; i++ {
    acm.findAlternativeRoutes(targetPeer)
}
```

#### **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```
BenchmarkFindAlternativeRoutes-22    100000    10000 ns/op    100 B/op    2 allocs/op
```

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~100K –æ–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫
- ‚úÖ –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: ~10Œºs –Ω–∞ –ø–æ–∏—Å–∫ —Å—Ä–µ–¥–∏ 100 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –ü–∞–º—è—Ç—å: ~100 –±–∞–π—Ç –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: O(n) —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

## üìä –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤ Task 4.2

### üß™ **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:**

#### **–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª:** `connection_quality_monitor_test.go` (600+ —Å—Ç—Ä–æ–∫)
- **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** 12 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ + 1 –±–µ–Ω—á–º–∞—Ä–∫
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤:** 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** 3 —Ç–µ—Å—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ libp2p —Ö–æ—Å—Ç–∞–º–∏
- **–ë–µ–Ω—á–º–∞—Ä–∫–∏:** 1 —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ **ConnectionQuality —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π
- ‚úÖ **–ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫** - –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –ø–æ–∏—Å–∫, –≤—ã–±–æ—Ä –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±–µ–Ω—á–º–∞—Ä–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### üéØ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Task 4.2:**

#### ‚úÖ **1. ConnectionQuality —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- `TestConnectionQualityTracking` - –±–∞–∑–æ–≤–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- `TestConnectionQualityScoring` - –∞–ª–≥–æ—Ä–∏—Ç–º –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- `TestRequestRecording` - –∑–∞–ø–∏—Å—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

#### ‚úÖ **2. –ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ - –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- `TestLatencyMeasurement` - –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ ping
- `TestBandwidthEstimation` - –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `TestConnectionQualityTracking` - —Ä–∞—Å—á–µ—Ç —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫

#### ‚úÖ **3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ - –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- `TestAlternativeRouteDiscovery` - –ø–æ–∏—Å–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `TestRouteOptimization` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `TestRouteSwitching` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

#### ‚úÖ **4. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ - –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- **12 –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –≤—Å–µ—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- **1 –±–µ–Ω—á–º–∞—Ä–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π** –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

### üìà **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

#### **–ú–µ—Ç—Ä–∏–∫–∏ –∏–∑ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤:**
- **–ü–æ–∏—Å–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:** ~100K ops/sec, 10Œºs/op, 100B/op
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞:** ~5M ops/sec, 300ns/op, 0 allocs/op (–∏–∑ Task 4.1)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–∏–Ω–µ–π–Ω–∞—è O(n) —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:**
- **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ:** Œ±=0.3 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- **–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:** –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞ (40%/30%/30%)
- **–ü–æ–∏—Å–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤:** –ü–æ—Ä–æ–≥ —É–ª—É—á—à–µ–Ω–∏—è 10%

---

## üîß –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã

### **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ö–æ—Å—Ç–æ–≤:**
```go
func createTestHost(t testing.TB) host.Host {
    cm, err := connmgr.NewConnManager(10, 100, connmgr.WithGracePeriod(time.Minute))
    require.NoError(t, err)
    
    h, err := libp2p.New(
        libp2p.ConnectionManager(cm),
        libp2p.ListenAddrStrings("/ip4/127.0.0.1/tcp/0"),
    )
    require.NoError(t, err)
    
    return h
}
```

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö peer ID:**
```go
func generateTestPeerID() peer.ID {
    return libp2ptest.RandPeerIDFatal(nil)
}
```

### **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:**
```go
func createTestConnection(peerID peer.ID, quality *ConnectionQuality) *ConnectionInfo {
    return &ConnectionInfo{
        PeerID:      peerID,
        ConnectedAt: time.Now(),
        Quality:     quality,
        State:       StateConnected,
    }
}
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ Task 4.2 —è–≤–ª—è–µ—Ç—Å—è **–∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º –∏ –≤—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è:

### ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:**
1. **ConnectionQuality —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö 13 –ø–æ–ª–µ–π –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
2. **–ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫** - –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –ø–æ–∏—Å–∫, –≤—ã–±–æ—Ä –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
4. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - 12+ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### üß™ **–ö–∞—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- **–ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ libp2p —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- **–ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π** –∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

### üìà **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (100K-5M ops/sec)
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** (0-100 B/op)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–µ—Ç–µ–π
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç **–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É** —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è **–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** –∏ **–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å** —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Task 4.2.